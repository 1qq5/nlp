# åŠ¨æ€è§„åˆ’ç¼–ç¨‹ï¼ˆdynamic programmingï¼‰

æœ¬èŠ‚è¯¾è€å¸ˆè®²äº†ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼šåŠ¨æ€è§„åˆ’ã€‚æ‰€è°“åŠ¨æ€è§„åˆ’æŒ‡çš„æ˜¯ä¸€ä¸ªå¤§é—®é¢˜å¯ä»¥åˆ†ä¸ºè‹¥å¹²ä¸ªç›¸åŒçš„å°é—®é¢˜ï¼ˆå¤§ã€å°é—®é¢˜ç›¸åŒï¼Œåªæ˜¯å¤§å°ä¸åŒï¼‰æ—¶çš„ä¸€ç§å¿«é€Ÿè§£å†³é—®é¢˜çš„åŠæ³•ã€‚ä¸ºäº†è§£å†³åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œè€å¸ˆå¼•å…¥äº†è£…é¥°å™¨çš„åŠŸèƒ½ã€‚å…³äºè£…é¥°å™¨ï¼Œ[çœ‹è¿™ä¸€ç¯‡æ–‡ç« å°±å¤Ÿäº†](https://foofish.net/python-decorator.html)ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡æœ‰ç†è§£é€ï¼Œæ‰€ä»¥æœ¬èŠ‚è¯¾çš„ä¸¤ä¸ªä¾‹å­ï¼Œæˆ‘å°è¯•ç€ä¸ç”¨åŠ¨æ€è§„åˆ’é‡æ–°å†™ä¸€éã€‚ï¼ˆæœ¬èŠ‚è¯¾å…¶å®ä¸€å…±æœ‰ä¸‰ä¸ªä¾‹å­ï¼Œç›®å‰æˆ‘åªçœ‹æ‡‚ä¸¤ä¸ªï¼‰

## å‰²ç®¡å­é—®é¢˜

å‡è®¾æˆ‘ä»¬è¦æŠŠä¸€æ ¹é•¿ç®¡å­åˆ†æˆè‹¥å¹²æ®µåˆ†åˆ«å–é’±ï¼Œä¸åŒé•¿åº¦çš„ç®¡å­æœ‰ä¸åŒçš„ä»·æ ¼ã€‚ç°åœ¨æœ‰ä¸€æ ¹ç»™å®šé•¿åº¦çš„ç®¡å­ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆåˆ‡å‰²ä¼šæ˜¯å”®ä»·æœ€é«˜ï¼Ÿ

é¦–å…ˆæˆ‘ä»¬çš„ä¸åŒé•¿åº¦çš„ç®¡å­çš„å”®ä»·å¦‚ä¸‹ï¼ˆç´¢å¼•å³ä¸ºç®¡å­çš„é•¿åº¦ï¼‰ï¼š`original_price = [1, 5, 8, 9, 10, 17, 17, 20, 24, 30]`

æˆ‘çš„æ€è·¯ï¼šå› ä¸ºä¸åŒé•¿åº¦çš„ç®¡å­çš„å•ä½é•¿åº¦å”®ä»·ä¸åŒï¼ˆæ€§ä»·æ¯”ä¸åŒï¼‰ï¼Œé‚£ä¹ˆåœ¨åˆ‡çš„æ—¶å€™è¦å°½é‡åˆ‡å‡ºç…§æ€§ä»·æ¯”é«˜çš„é•¿åº¦ã€‚æ¯”å¦‚æœ‰ä¸€æ®µé•¿åº¦ä¸º 3 çš„ç®¡å­ï¼Œåˆ‡æˆ 1 å’Œ 2ï¼ˆæ€»ä»·ä¸º 1+5=6ï¼‰æ¯”åˆ‡æˆ 3 æ®µ 1ï¼ˆæ€»ä»·ä¸º 1\*3=3ï¼‰çš„å”®ä»·é«˜ï¼Œå› ä¸º 2 çš„æ€§ä»·æ¯”ï¼ˆ2.5ï¼‰æ¯” 1 çš„æ€§ä»·æ¯”é«˜ã€‚å› æ­¤æˆ‘å…ˆæŠŠé•¿åº¦æŒ‰ç…§æ€§ä»·æ¯”å€’åºæ’åºï¼Œè‹¥æ€§ä»·æ¯”ç›¸åŒåˆ™æ­£åºæ’åºï¼ˆå¤šåˆ‡ä¸€æ®µå¯ä»¥å¤šå–é’±ï¼‰ï¼›ç„¶åç”¨å•ä½é•¿åº¦å»é™¤æ€»é•¿åº¦ï¼Œå‡å¦‚å¤§äº 1ï¼ˆæ„å‘³ç€å¯ä»¥åˆ‡ï¼‰ï¼Œåˆ™å”®ä»·åŠ è¿™æ®µçš„ä»·å€¼åŒæ—¶é•¿åº¦å‡å»å•ä½é•¿åº¦ï¼›å‡å¦‚å°äº 1ï¼Œåˆ™çœ‹ä¸‹ä¸€ä¸ªå•ä½é•¿åº¦ã€‚å…ˆç”Ÿæˆæ‰€éœ€çš„æ•°æ®ï¼š
```python
original_price = [1, 5, 8, 9, 10, 17, 17, 20, 24, 30]
dct = {} # ä»·å€¼ä¸ºé”®ï¼Œé•¿åº¦ä¸ºå€¼çš„å­—å…¸
rate = [] # ä¸åŒé•¿åº¦çš„æ€§ä»·æ¯”
for i, j in enumerate(original_price):
    rate.append(j / (i+1))
    dct[j] = i + 1
original_price = [x for x, _ in sorted(zip(original_price, rate), key=lambda x: x[1], reverse=True)]
rate = sorted(rate, reverse=True)
print(f"original price: {original_price}\n")
print(f'rate: {rate}\n')
print(f'pair: {dct}')
```
è¿”å›ï¼š
```python
original price: [30, 17, 8, 24, 5, 20, 17, 9, 10, 1]

rate: [3.0, 2.8333333333333335, 2.6666666666666665, 2.6666666666666665, 2.5, 2.5, 2.4285714285714284, 2.25, 2.0, 1.0]

pair: {1: 1, 5: 2, 8: 3, 9: 4, 10: 5, 17: 7, 20: 8, 24: 9, 30: 10}
```
å®šä¹‰çš„ç®—æ³•ä¸ºï¼š
```python
def best_revenue(num):
    lst = []
    revenue = 0
    while num > 0:
        print(f'initial num: {num}')
        for i in original_price:
            print(f"current i is {i}.")
            while num // dct[i] > 0:
                lst.append(dct[i])
                num -= dct[i]
                print(f'new number is {num}, from subtraction of {dct[i]}.')
                revenue += i
    print(f'The cut method is {lst} with revenue {revenue}')
```
éšä¾¿ç”¨ä¸€ä¸ªæ•°å­—è¯•ä¸€ä¸‹ï¼š
```python
>>> best_revenue(119)
initial num: 119
current i is 30.
new number is 109, from subtraction of 10.
new number is 99, from subtraction of 10.
new number is 89, from subtraction of 10.
new number is 79, from subtraction of 10.
new number is 69, from subtraction of 10.
new number is 59, from subtraction of 10.
new number is 49, from subtraction of 10.
new number is 39, from subtraction of 10.
new number is 29, from subtraction of 10.
new number is 19, from subtraction of 10.
new number is 9, from subtraction of 10.
current i is 17.
new number is 2, from subtraction of 7.
current i is 8.
current i is 24.
current i is 5.
new number is 0, from subtraction of 2.
current i is 20.
current i is 17.
current i is 9.
current i is 10.
current i is 1.
The cut method is [10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 7, 2] with revenue 352
```
è¿™éƒ¨åˆ†ä»£ç çš„ GitHub åœ°å€ï¼šhttps://github.com/vincent507cpu/nlp/blob/master/assignment/03/Part%20I.ipynb

## è¡Œé©¶è·¯çº¿é—®é¢˜

åˆå§‹é—®é¢˜ï¼š**ç»™å®šä¸€ä¸ªåˆå§‹ç‚¹ ğ‘ƒ, å·²ç» ğ‘˜ä¸ªè½¦è¾†ï¼Œå¦‚ä½•ä»è¯¥ç‚¹å‡ºå‘ï¼Œç»è¿™ k ä¸ªè½¦è¾†ç»è¿‡æ‰€ä»¥çš„ç‚¹å…¨éƒ¨ä¸€æ¬¡ï¼Œè€Œä¸”æ‰€èµ°è¿‡çš„è·¯ç¨‹æœ€çŸ­?**

è¯´å®è¯æˆ‘æ²¡çœ‹æ‡‚...æ‰€ä»¥æˆ‘è‡ªä½œä¸»å¼ å°†æœ¬é—®é¢˜ç®€åŒ–ä¸ºâ€œ**ç»™å®šä¸€ä¸ªåˆå§‹ç‚¹ ğ‘ƒ, æœ‰ä¸€è¾†è½¦ï¼Œå¦‚ä½•ä»è¯¥ç‚¹å‡ºå‘ï¼Œæ‰€æœ‰çš„ç‚¹å…¨éƒ¨ç»è¿‡ä¸€æ¬¡ï¼Œè€Œä¸”æ‰€èµ°è¿‡çš„è·¯ç¨‹æœ€çŸ­?**

é¦–å…ˆæˆ‘ä»¬æ¥ç”»å›¾ï¼š
```python
import random
import matplotlib.pylab as plt

random.seed(1988) # eliminate randomness
latitudes = [random.randint(-100, 100) for _ in range(20)]
longitude = [random.randint(-100, 100) for _ in range(20)]
plt.scatter(latitudes, longitude)
```

![](pics/points.png)

æ ‡è®°èµ·å§‹ç‚¹ï¼š
```python
plt.scatter(latitudes, longitude)
plt.scatter([chosen_p[0]], [chosen_p[1]], color='r')
```

![](start_point.png)

ç®—æ³•æ¯”è¾ƒç®€å•ï¼šä¸¤ä¸ªå¾ªç¯ï¼Œç¬¬ä¸€ä¸ªå¾ªç¯éå†ç‚¹çš„ä¸ªæ•°ï¼ˆæ¯ä¸ªç‚¹éƒ½è¦èµ°åˆ°ï¼‰ï¼›ç¬¬äºŒä¸ªå¾ªç¯è®¡ç®—åˆ°å„ä¸ªç‚¹çš„è·ç¦»ï¼Œæ‰¾åˆ°è·ç¦»æœ€çŸ­çš„ç‚¹ï¼ŒæŠŠè½¦æ‰€åœ¨çš„ç‚¹ç§»åˆ°è¯¥ç‚¹ä¸Šï¼ŒåŒæ—¶å°†è¯¥ç‚¹æ·»åŠ åˆ°å·²ç»ç»è¿‡çš„ç‚¹çš„åˆ—è¡¨é‡Œï¼›ä»å¤´éå†ï¼Œå‡å¦‚ç‚¹å·²ç»èµ°è¿‡ï¼Œåˆ™è·³è¿‡ã€‚
```python
import numpy as np

coordinate = []
for lat, lon in zip(latitudes, longitude):
    coordinate.append((lat,lon)) # ç”Ÿæˆåæ ‡
    
def dist(x, y):
    return np.sqrt((x[0]-y[0])**2+(x[1]-y[1])**2) # è®¡ç®—è·ç¦»

coordinate_copy = coordinate.copy()
def path(start):
    path = [] # åˆå§‹åŒ–ä¿å­˜å·²ç»ç»è¿‡çš„ç‚¹çš„åˆ—è¡¨
    for i in range(len(coordinate_copy)): # ç¬¬ä¸€å±‚å¾ªç¯
        distance = [] # åˆå§‹åŒ–è·ç¦»
        for j in range(len(coordinate)): # ç¬¬äºŒå±‚å¾ªç¯ï¼Œè®¡ç®—è·ç¦»
            distance.append(dist(coordinate[j], start))
        full = zip(coordinate, distance)
        shortest = sorted(full, key=lambda x:x[1])[0] # æ ¹æ®è·ç¦»ä¸ºåæ ‡æ’åº
        path.append(shortest[0])
        start = coordinate.pop(coordinate.index(shortest[0])) # å°†ç‚¹æ›´æ–°ä¸ºè·ä¸Šä¸€ä¸ªç‚¹è·ç¦»æœ€çŸ­çš„ç‚¹
    return path
```
è¿è¡Œä¸€ä¸‹å¹¶ç”»å›¾ï¼š
```python
pathes_coord = list(zip(*pathes))
print(pathes_coord)
label = [i+1 for i in range(len(longitude))]
print(label)
plt.scatter([chosen_p[0]], [chosen_p[1]], color='r')
plt.scatter(pathes_coord[0], pathes_coord[1])
for i in range(len(pathes_coord[0])):
    plt.text(pathes_coord[0][i], pathes_coord[1][i], label[i])
```

![](pics/drive_routes.png)

è¿™éƒ¨åˆ†ä»£ç çš„ GitHub åœ°å€ï¼šhttps://github.com/vincent507cpu/nlp/blob/master/assignment/03/Part%20II.ipynb